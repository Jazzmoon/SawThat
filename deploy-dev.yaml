version: '3.7'
services:
  frontend:
    container_name: frontend
    build:
      context: ./frontend
      dockerfile: Dockerfile
    ports:
      - 8080:8080
    volumes:
      - ./frontend:/app/vue
      - /app/vue/node_modules
    depends_on:
      - backend
    networks:
      - vlan
  backend:
    container_name: backend
    build:
      context: ./backend
      dockerfile: Dockerfile
    ports:
      - 3000:3000
    volumes:
      - ./backend:/app/api
      - /app/api/node_modules
    networks:
      - vlan
  # api-docs:
  #   container_name: api-docs
  #   image: redocly/redoc
  #   restart: unless-stopped
  #   logging:
  #     driver: "json-file"
  #     options:
  #       max-size: "1m"
  #       max-file: "5"
  #   networks:
  #     - vlan
  #   security_opt:
  #     - apparmor:unconfined
  #   ulimits:
  #     nofile:
  #       soft: 65536
  #       hard: 65536
  #   expose:
  #     - 80 # internal HTTP port
  #   volumes:
  #     - ./backend/swagger.yaml:/usr/share/nginx/html/swagger.yaml
  #   environment:
  #    - SPEC_URL=/swagger.yaml
networks:
  vlan:
volumes: